<div class="cmty-view-post-item-text">For every <img alt="$ n\in\mathbb{N}$" class="latex" height="13" src="https://latex.artofproblemsolving.com/0/8/0/080cdf1a66b431a1c1e83b6f921e81bc2b4ec770.png" style="vertical-align: -1px" width="45"/> let <img alt="$ d(n)$" class="latex" height="18" src="https://latex.artofproblemsolving.com/d/a/1/da142b6a35940588493ed2aee96d4dbe3b526124.png" style="vertical-align: -4px" width="33"/> denote the number of (positive) divisors of <span style="white-space:nowrap;"><img alt="$ n$" class="latex" height="8" src="https://latex.artofproblemsolving.com/6/d/3/6d3f8b726378d5420223c5cb14b10f24b202b187.png" width="10"/>.</span> Find all functions <img alt="$ f: \mathbb{N}\to\mathbb{N}$" class="latex" height="16" src="https://latex.artofproblemsolving.com/f/d/a/fda00927d1aab9303c64113a8d38378cca3f7ca8.png" style="vertical-align: -3px" width="79"/> with the following properties:
<ul class="bbcode_list">
<li><img alt="$ d\left(f(x)\right) = x$" class="latex" height="18" src="https://latex.artofproblemsolving.com/1/2/1/1213ea522de33ba12bb75e155e4eed5f4a52139f.png" style="vertical-align: -4px" width="96"/> for all <span style="white-space:nowrap;"><img alt="$ x\in\mathbb{N}$" class="latex" height="13" src="https://latex.artofproblemsolving.com/3/9/1/3914db2acac4261966d52e33eb7ab1646e559698.png" style="vertical-align: -1px" width="45"/>.</span></li>
<li><img alt="$ f(xy)$" class="latex" height="18" src="https://latex.artofproblemsolving.com/8/e/9/8e9251869e603af40d98b86d349c6d5ba5f3939b.png" style="vertical-align: -4px" width="43"/> divides <img alt="$ (x - 1)y^{xy - 1}f(x)$" class="latex" height="19" src="https://latex.artofproblemsolving.com/7/8/0/780e2e47eda9fd507eb7a0172160a226d3e638f9.png" style="vertical-align: -4px" width="132"/> for all <span style="white-space:nowrap;"><img alt="$ x$" class="latex" height="8" src="https://latex.artofproblemsolving.com/2/e/8/2e894ebb8c4e2dcb0ad8c2b8d415aaf4a0303e86.png" width="10"/>,</span> <span style="white-space:nowrap;"><img alt="$ y\in\mathbb{N}$" class="latex" height="15" src="https://latex.artofproblemsolving.com/0/e/e/0ee7dd552867be0b6c12e21a4a589388a9a7b8d1.png" style="vertical-align: -3px" width="44"/>.</span></li>
</ul>
<br/>
<i>Proposed by Bruno Le Floch, France</i></div>