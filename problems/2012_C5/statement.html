<div class="cmty-view-post-item-text">The columns and the row of a <img alt="$3n \times 3n$" class="latex" height="12" src="https://latex.artofproblemsolving.com/1/9/5/195f817ac8f6c26828b7c1946a810ba91c74aa91.png" width="61"/> square board are numbered <span style="white-space:nowrap;"><img alt="$1,2,\ldots ,3n$" class="latex" height="16" src="https://latex.artofproblemsolving.com/3/1/0/3100ed7adb87c1b82fe30632397836ab06087d4f.png" style="vertical-align: -3px" width="86"/>.</span> Every square <img alt="$(x,y)$" class="latex" height="18" src="https://latex.artofproblemsolving.com/e/5/3/e53b1fe25be1c679117fb44a6a886fe1247d189a.png" style="vertical-align: -4px" width="40"/> with <img alt="$1 \leq x,y \leq 3n$" class="latex" height="16" src="https://latex.artofproblemsolving.com/5/e/7/5e7badd454ffde0972c4ab5105c7033493a2fadd.png" style="vertical-align: -3px" width="105"/> is colored asparagus, byzantium or citrine according as the modulo <img alt="$3$" class="latex" height="12" src="https://latex.artofproblemsolving.com/7/c/d/7cde695f2e4542fd01f860a89189f47a27143b66.png" width="8"/> remainder of <img alt="$x+y$" class="latex" height="14" src="https://latex.artofproblemsolving.com/d/3/d/d3da9f8c7fe0473fdd6f8597eff61d71fedda430.png" style="vertical-align: -3px" width="41"/> is <img alt="$0,1$" class="latex" height="16" src="https://latex.artofproblemsolving.com/a/9/c/a9c68bec0cb7169b21d20277b13cb52aaaf4487e.png" style="vertical-align: -3px" width="25"/> or <img alt="$2$" class="latex" height="12" src="https://latex.artofproblemsolving.com/4/1/c/41c544263a265ff15498ee45f7392c5f86c6d151.png" width="8"/> respectively. One token colored asparagus, byzantium or citrine is placed on each square, so that there are <img alt="$3n^2$" class="latex" height="15" src="https://latex.artofproblemsolving.com/3/b/f/3bff0083c60ce7c1adbed8c2f6a74aaa30532aa4.png" width="26"/> tokens of each color.<br/>
Suppose that one can permute the tokens so that each token is moved to a distance of at most <img alt="$d$" class="latex" height="12" src="https://latex.artofproblemsolving.com/9/6/a/96ab646de7704969b91c76a214126b45f2b07b25.png" width="9"/> from its original position, each asparagus token replaces a byzantium token, each byzantium token replaces a citrine token, and each citrine token replaces an asparagus token. Prove that it is possible to permute the tokens so that each token is moved to a distance of at most <img alt="$d+2$" class="latex" height="14" src="https://latex.artofproblemsolving.com/d/6/c/d6cdbf76775d8adbfbc00a784bdbb6dadf8b6e75.png" style="vertical-align: -1px" width="40"/> from its original position, and each square contains a token with the same color as the square.</div>