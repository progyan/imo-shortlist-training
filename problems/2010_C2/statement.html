<div class="cmty-view-post-item-text">On some planet, there are <img alt="$2^N$" class="latex" height="15" src="https://latex.artofproblemsolving.com/d/0/2/d0227096497e8a9e45be802dc53e0bec67876a63.png" width="20"/> countries <img alt="$(N \geq 4).$" class="latex" height="18" src="https://latex.artofproblemsolving.com/a/c/8/ac873781de49c974232813a007a8d0650dd5fcb9.png" style="vertical-align: -4px" width="67"/> Each country has a flag <img alt="$N$" class="latex" height="12" src="https://latex.artofproblemsolving.com/f/c/9/fc97ef67268cd4e91bacdf12b8901d7036c9a056.png" width="16"/> units wide and one unit high composed of <img alt="$N$" class="latex" height="12" src="https://latex.artofproblemsolving.com/f/c/9/fc97ef67268cd4e91bacdf12b8901d7036c9a056.png" width="16"/> fields of size <img alt="$1 \times 1,$" class="latex" height="15" src="https://latex.artofproblemsolving.com/2/0/a/20af441ab21811849ce04060a5bf09757a66c888.png" style="vertical-align: -3px" width="44"/> each field being either yellow or blue. No two countries have the same flag. We say that a set of <img alt="$N$" class="latex" height="12" src="https://latex.artofproblemsolving.com/f/c/9/fc97ef67268cd4e91bacdf12b8901d7036c9a056.png" width="16"/> flags is diverse if these flags can be arranged into an <img alt="$N \times N$" class="latex" height="12" src="https://latex.artofproblemsolving.com/c/b/2/cb21db0177b65427c9c7fb7bd9183d242bdbcb1f.png" width="55"/> square so that all <img alt="$N$" class="latex" height="12" src="https://latex.artofproblemsolving.com/f/c/9/fc97ef67268cd4e91bacdf12b8901d7036c9a056.png" width="16"/> fields on its main diagonal will have the same color. Determine the smallest positive integer <img alt="$M$" class="latex" height="12" src="https://latex.artofproblemsolving.com/5/d/1/5d1e4485dc90c450e8c76826516c1b2ccb8fce16.png" width="19"/> such that among any <img alt="$M$" class="latex" height="12" src="https://latex.artofproblemsolving.com/5/d/1/5d1e4485dc90c450e8c76826516c1b2ccb8fce16.png" width="19"/> distinct flags, there exist <img alt="$N$" class="latex" height="12" src="https://latex.artofproblemsolving.com/f/c/9/fc97ef67268cd4e91bacdf12b8901d7036c9a056.png" width="16"/> flags forming a diverse set.<br/>
<br/>
<i>Proposed by TonÄ‡i Kokan, Croatia</i></div>